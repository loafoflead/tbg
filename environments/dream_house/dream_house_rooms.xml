<dream_house_rooms>

    <!-- DREAM_BEDROOM _/ -->
    <room> 

        <id>0</id>

        <tag>dream_bedroom</tag>
        <name>Dream bedroom</name>

        <desc>Your bedroom. You havn't changed the walls since you were a kid, and the wallpaper is a mess of shades of grey and shapes. You bed is in front of you, your desk to your right, and your cupboard to your left. south is your bedroom door, and north is your bedroom window.</desc>
        
        <directions>
            <north>
                <leads>#</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                    print(You try and open the window. It's sealed shut.);
                </action>
            </north>

            <east>
                <leads></leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </east>
            <south>
                <leads>dream_hallway</leads>
                <dia>You enter the hallway.</dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </south>
            <west>
                <leads></leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </west>

        </directions>

        <objs>dream_cupboard/dream_bedroom_desk/dream_bed</objs>
        <items></items>

    </room>

    <!-- DREAM HALLWAY _/ -->
    <room> 

        <id>1</id>

        <tag>dream_hallway</tag>
        <name>Dream Upstairs hallway</name>

        <desc>A short hallway, the gray wallpaper is peeling in places showing the plaster beneath it. The door to your parents room is west, your siblings room is south, and the stairs are east.</desc>
        
        <directions>
            <north>
                <leads>dream_bedroom</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </north>

            <east>
                <leads>dream_downstairs_hallway</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </east>
            <south>
                <leads>dream_sibling_room</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </south>
            <west>
                <leads>dream_parents_room</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </west>

        </directions>

        <objs>magic_portal</objs>
        <items></items>

    </room>

    <!-- DREAM SIBLING ROOM _/ -->
    <room> 

        <id>2</id>

        <tag>sibling_room</tag>
        <name>Sibling's room</name>

        <desc>A small squat little room, almost identical to yours, only with two small windows instead of one. Your sibling's desk sits opposite their bed, both pieces of furniture are covered by an opaque plastic tarp. The only accessible piece of furniture is the cupboard on your right. North is the door back to the hallway.</desc>
        
        <directions>
            <north>
                <leads>dream_hallway</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </north>

            <east>
                <leads></leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </east>
            <south>
                <leads></leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </south>
            <west>
                <leads></leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </west>

        </directions>

        <objs>magic_portal/dream_sibling_cupboard</objs>
        <items></items>

    </room>

    <!-- DREAM PARENT ROOM _/ -->
    <room> 

        <id>2</id>

        <tag>dream_parents_room</tag>
        <name>Parent's room</name>

        <desc>A large room with a huge four poster bed in the center that takes up most of the available space. The rest of the furniture in the room is covered in plastic tarp. West is the ladder leading to your attic, east the door back to your hallway.</desc>
        
        <directions>
            <north>
                <leads></leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </north>

            <east>
                <leads>dream_hallway</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </east>
            <south>
                <leads></leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </south>
            <west>
                <leads>dream_attic</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </west>

        </directions>

        <objs>magic_portal</objs>
        <items></items>

    </room>

    <!-- DREAM ATTIC _/ -->
    <room> 

        <id>3</id>

        <tag>dream_attic</tag>
        <name>Dream attic</name>

        <desc>A long, low-ceilinged room. It's dark, and the path ahead of you is cluttered with a wall of garbage. East are the stairs back down to your parent's room, north is the rest of the attic.</desc>
        
        <directions>
            <north>
                <leads>#</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                    if(inv=dream_bomb) [
                        print(You place the bomb in front of the garbage. As if by magic, it lights itself. You duck behind a wooden pillar, and the blast goes off, shaking the entire room.);
                        take(dream_bomb);
                        goto(dream_attic_2);
                        print(You dodge through the singed remains of the wall of rubbish.);
                    ]   ?   [
                        print(You can't get past this wall, you'd need something like a {Grey}bomb{White} to get past this.);
                    ]
                </action>
            </north>

            <east>
                <leads>dream_parents_room</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </east>
        </directions>

        <objs>dream_attic_box</objs>
        
        <on_enter>
            if(tag=catch_beast) [
                print(You see the monster dart over the wall of garbage north of you. You try and push the rubbish away, but to no avail. You think you'd need a {DarkRed}bomb{White} or something to get rid of that wall.);
            ]
        </on_enter>
        <on_entry_once>True</on_entry_once>

    </room>

    <!-- DREAM DOWNSTAIRS HALLWAY _/ -->
    <room> 

        <id>4</id>

        <tag>dream_downstairs_hallway</tag>
        <name>Dream downstairs hallway</name>

        <desc>A long, uninteresting hallway. There's a dark wood dresser on the wall next to you, and a mirror above it. North of you is the door to the kitchen, west the bathroom, south the door into your garage, and east the front door. The floor is covered in a centimetre tall layer of dark water. It sloshes around every time you take a step.</desc>
        
        <directions>
            <north>
                <leads>dream_kitchen</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </north>

            <east>
                <leads>#logic#</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                    if(inv=dream_house_key)
                        [
                            if(tags=defeated_beast) [
                                print(You unlock the door and walk out into the front garden.);
                                go(dream_front_garden);
                                return();
                            ]
                            print(The front door is locked.);
                            print(Do you want to unlock it with-);
                            flush();
                            wait();
                            print(In a flash, a dark figure snatches the key out of your hands, and runs away into the hallway.);
                            take(dream_house_key);
                            flush();
                            wait(2);
                            if(tags=saw_beast)
                                [
                                    print(After recovering from your shock, you remember the thing you saw in your sibling's cupboard earlier.);
                                ]
                            ?
                                [
                                    print(You wonder what that thing could be.);
                                ]
                            print(You know you're going to have to catch that monster.);
                            givetag(catch_beast);
                        ]
                    ?
                        [
                            if(inv=acoustic_hammer) [
                                print(You use the acoustic hammer on the door, it opens with a click.);
                                goto(dream_front_garden);
                            ]   ?   [
                                print(The front door is locked.);
                            ]
                        ]
                </action>
            </east>
            <south>
                <leads>dream_garage</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </south>
            <west>
                <leads>dream_bathroom</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </west>

        </directions>

        <objs>dream_mirror/dream_dresser</objs>
        <items></items>

    </room>

    <!-- DREAM GARAGE _/ -->
    <room> 

        <id>5</id>

        <tag>dream_garage</tag>
        <name>Dream garage</name>

        <desc>A dark grimy room full of rubbish and old furniture. There's a switch to your left, you remember it's used to open and shut the garage door. It looks broken. The only readily available piece of furniture is a cluttered row of shelves. East is the garage door, North is the door back into the hall.</desc>
        
        <directions>
            <north>
                <leads>dream_downstairs_hallway</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </north>
            <east>
                <leads>#####</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                    print(The garage door is shut.);
                </action>
            </east>
        </directions>

        <objs>dream_light_switch_garage/dream_garage_shelves</objs>
        <items></items>

    </room>

    <!-- DREAM KITCHEN _/ -->
    <room> 

        <id>6</id>

        <tag>dream_kitchen</tag>
        <name>Dream kitchen</name>

        <desc>A classic looking kitchen. Most of the furniture is in disrepair, or covered in plastic tarp. There's a kitchen cupboard above you. South is the door back to the hallway.</desc>
        
        <directions>
            <south>
                <leads>dream_downstairs_hallway</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </south>
        </directions>

        <objs>dream_kitchen_cupboard</objs>

    </room>

    <!-- BATHROOM _/ -->
    <room> 

        <id>7</id>

        <tag>dream_bathroom</tag>
        <name>Dream bathroom</name>

        <desc>A small room. The floor and walls are covered in grey-white tiles, the ceiling is plaster, with a single bulb sticking out of it. The bulb is shattered. There's a sink ahead of you with a mirror above it, and a bath to your left. East is the door back to the hallway.</desc>
        
        <directions>
            <east>
                <leads>dream_downstairs_hallway</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </east>
        </directions>

        <objs>dream_bath/dream_sink/dream_mirror</objs>
        <items></items>

    </room>

     <!-- DREAM ATTIC 2 X -->
    <room> 

        <id>8</id>

        <tag>dream_attic_2</tag>
        <name>Dream attic, 2</name>

        <desc>A cramped little hallway with piles of old, dusty boxes on either side of you. You look ahead of you, #if:inv=dream_house_key:[that's where the creature was]?[the creature is sitting there, with it's back to you]#. South  is the passage back to the attic.</desc>
        
        <directions>
            <south>
                <leads>dream_attic</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                    
                </action>
            </south>
        </directions>

        <objs>the_beast</objs>

    </room>

    <!-- DREAM FRONT GARDEN -->
    <room> 

        <id>9</id>

        <tag>dream_front_garden</tag>
        <name>Dream front garden</name>

        <desc>Your front garden. It's early morning, and there's still dewdrops on the grass. East is a beaten dirt path to the road to your small village, north is your front door. South is your garage door.</desc>
        
        <directions>
            <north>
                <leads>dream_downstairs_hallway</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </north>

            <east>
                <leads>dream_dirt_path</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                </action>
            </east>
            <south>
                <leads>##</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                    print(The garage door is locked.);
                </action>
            </south>
        </directions>

        <objs></objs>
        <items></items>

    </room>

    <!-- DREAM BACK GARDEN _/ -->
    <room> 

        <id>10</id>

        <tag>dream_back_garden</tag>
        <name>Dream back garden</name>

        <desc>Your back garden, it's dark and foggy, you can't see very far in front of you. You're able to make out a birdbath in front of you, but you can't see anything else through the thick fog.</desc>
        
        <directions>
            <west>
                <leads>dream_hidden_garden</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </west>
        </directions>

        <objs>dream_birdbath</objs>

        <on_enter>
            if(tags!defeated_beast) [
                print(You hear a dismal screeching from inside the house. You decide to ignore it.);
                givetag(escaped);
            ]
        </on_enter>
        <on_entry_once>True</on_entry_once>

    </room>

    <!-- DREAM HIDDEN GARDEN _/ -->
    <room> 

        <id>11</id>

        <tag>dream_hidden_garden</tag>
        <name>Dream hidden garden</name>

        <desc>A small hidden garden, it's walled off by tall thorn covered bushes. There's a path into one of the bushes north of you, and east is the path back into the garden. This place has an unsettlingnly real feeling to it.</desc>
        
        <directions>
            <east>
                <leads>dream_back_garden</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action></action>
            </east>
            <north>
                <leads>#</leads>
                <dia></dia>
                <lock></lock>
                <lock_dia></lock_dia>
                <unlock_dia></unlock_dia>
                <lock_reqs></lock_reqs>
                <tag_lock_dia></tag_lock_dia>
                <action>
                    print(You duck through the bushes, getting snagged on some thorns.);
                    env(house);
                    set_room(hidden_garden);
                    run(replace_normal_items);
                </action>
            </north>
            
        </directions>


    </room>


</dream_house_rooms>

